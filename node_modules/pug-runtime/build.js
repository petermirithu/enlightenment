'use strict';

var fs = require('fs');
var dependencies = require('./lib/dependencies.js');
var internals = require('./lib/internals.js');
var sources = require('./lib/sources.js');

module.exports = build;

function build(functions) {
  var fns = [];
<<<<<<< HEAD
  functions = functions.filter(function (fn) {
=======
  functions = functions.filter(function(fn) {
>>>>>>> e100a71af6da32effbcb14a1bf1ca112a193289c
    return !internals[fn];
  });
  for (var i = 0; i < functions.length; i++) {
    if (fns.indexOf(functions[i]) === -1) {
      fns.push(functions[i]);
      functions.push.apply(functions, dependencies[functions[i]]);
    }
  }
<<<<<<< HEAD
  return fns.sort().map(function (name) {
    return sources[name];
  }).join('\n');
=======
  return fns
    .sort()
    .map(function(name) {
      return sources[name];
    })
    .join('\n');
>>>>>>> e100a71af6da32effbcb14a1bf1ca112a193289c
}
